{
  "id": "http://hl7.org/fhir/StructureDefinition/Patient",
  "nested": {
    "id": "#Patient#constraints",
    "fhirPath-dom-2": {
      "key": "dom-2",
      "expression": "contained.contained.empty()",
      "severity": "error",
      "bestPractice": false,
      "humanDescription": "If the resource is contained in another resource, it SHALL NOT contain nested Resources"
    },
    "fhirPath-dom-3": {
      "key": "dom-3",
      "expression": "contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()",
      "severity": "error",
      "bestPractice": false,
      "humanDescription": "If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource"
    },
    "fhirPath-dom-4": {
      "key": "dom-4",
      "expression": "contained.meta.versionId.empty() and contained.meta.lastUpdated.empty()",
      "severity": "error",
      "bestPractice": false,
      "humanDescription": "If a resource is contained in another resource, it SHALL NOT have a meta.versionId or a meta.lastUpdated"
    },
    "fhirPath-dom-5": {
      "key": "dom-5",
      "expression": "contained.meta.security.empty()",
      "severity": "error",
      "bestPractice": false,
      "humanDescription": "If a resource is contained in another resource, it SHALL NOT have a security label"
    },
    "fhirPath-dom-6": {
      "key": "dom-6",
      "expression": "text.`div`.exists()",
      "severity": "warning",
      "bestPractice": true,
      "humanDescription": "A resource should have narrative for robust management"
    }
  },
  "cardinality": "0..*",
  "children": {
    "id": {
      "id": "#Patient.id",
      "cardinality": "0..1",
      "ref": "http://hl7.org/fhirpath/System.String",
      "xml-order": 10
    },
    "meta": {
      "id": "#Patient.meta",
      "nested": {
        "id": "#Patient.meta#constraints",
        "fhirPath-ele-1": {
          "key": "ele-1",
          "expression": "hasValue() or (children().count() > id.count())",
          "severity": "error",
          "bestPractice": false,
          "humanDescription": "All FHIR elements must have a @value or children"
        }
      },
      "cardinality": "0..1",
      "ref": "http://hl7.org/fhir/StructureDefinition/Meta",
      "xml-order": 20
    },
    "implicitRules": {
      "id": "#Patient.implicitRules",
      "nested": {
        "id": "#Patient.implicitRules#constraints",
        "fhirPath-ele-1": {
          "key": "ele-1",
          "expression": "hasValue() or (children().count() > id.count())",
          "severity": "error",
          "bestPractice": false,
          "humanDescription": "All FHIR elements must have a @value or children"
        }
      },
      "cardinality": "0..1",
      "ref": "http://hl7.org/fhir/StructureDefinition/uri",
      "xml-order": 30
    },
    "language": {
      "id": "#Patient.language",
      "binding": {
        "strength": "preferred",
        "abstractAllowed": true,
        "valueSet": "http://hl7.org/fhir/ValueSet/languages",
        "description": "A human language."
      },
      "nested": {
        "id": "#Patient.language#constraints",
        "fhirPath-ele-1": {
          "key": "ele-1",
          "expression": "hasValue() or (children().count() > id.count())",
          "severity": "error",
          "bestPractice": false,
          "humanDescription": "All FHIR elements must have a @value or children"
        }
      },
      "cardinality": "0..1",
      "ref": "http://hl7.org/fhir/StructureDefinition/code",
      "xml-order": 40
    },
    "text": {
      "id": "#Patient.text",
      "nested": {
        "id": "#Patient.text#constraints",
        "fhirPath-ele-1": {
          "key": "ele-1",
          "expression": "hasValue() or (children().count() > id.count())",
          "severity": "error",
          "bestPractice": false,
          "humanDescription": "All FHIR elements must have a @value or children"
        }
      },
      "cardinality": "0..1",
      "ref": "http://hl7.org/fhir/StructureDefinition/Narrative",
      "xml-order": 50
    },
    "contained": {
      "id": "#Patient.contained",
      "cardinality": "0..*",
      "allOf": [
        {
          "typeschema": "(from InstanceType)"
        },
        {
          "dynaref": "meta.profile"
        }
      ],
      "xml-order": 60
    },
    "extension": {
      "id": "#Patient.extension",
      "nested": {
        "id": "#Patient.extension#constraints",
        "fhirPath-ele-1": {
          "key": "ele-1",
          "expression": "hasValue() or (children().count() > id.count())",
          "severity": "error",
          "bestPractice": false,
          "humanDescription": "All FHIR elements must have a @value or children"
        },
        "fhirPath-ext-1": {
          "key": "ext-1",
          "expression": "extension.exists() != value.exists()",
          "severity": "error",
          "bestPractice": false,
          "humanDescription": "Must have either extensions or value[x], not both"
        }
      },
      "cardinality": "0..*",
      "allOf": [
        {
          "ref": "http://hl7.org/fhir/StructureDefinition/Extension"
        },
        {
          "dynaref": "url"
        }
      ],
      "xml-order": 70
    },
    "modifierExtension": {
      "id": "#Patient.modifierExtension",
      "nested": {
        "id": "#Patient.modifierExtension#constraints",
        "fhirPath-ele-1": {
          "key": "ele-1",
          "expression": "hasValue() or (children().count() > id.count())",
          "severity": "error",
          "bestPractice": false,
          "humanDescription": "All FHIR elements must have a @value or children"
        },
        "fhirPath-ext-1": {
          "key": "ext-1",
          "expression": "extension.exists() != value.exists()",
          "severity": "error",
          "bestPractice": false,
          "humanDescription": "Must have either extensions or value[x], not both"
        }
      },
      "cardinality": "0..*",
      "allOf": [
        {
          "ref": "http://hl7.org/fhir/StructureDefinition/Extension"
        },
        {
          "dynaref": "url"
        }
      ],
      "xml-order": 80
    },
    "identifier": {
      "id": "#Patient.identifier",
      "nested": {
        "id": "#Patient.identifier#constraints",
        "fhirPath-ele-1": {
          "key": "ele-1",
          "expression": "hasValue() or (children().count() > id.count())",
          "severity": "error",
          "bestPractice": false,
          "humanDescription": "All FHIR elements must have a @value or children"
        }
      },
      "cardinality": "0..*",
      "ref": "http://hl7.org/fhir/StructureDefinition/Identifier",
      "xml-order": 90
    },
    "active": {
      "id": "#Patient.active",
      "nested": {
        "id": "#Patient.active#constraints",
        "fhirPath-ele-1": {
          "key": "ele-1",
          "expression": "hasValue() or (children().count() > id.count())",
          "severity": "error",
          "bestPractice": false,
          "humanDescription": "All FHIR elements must have a @value or children"
        }
      },
      "cardinality": "0..1",
      "ref": "http://hl7.org/fhir/StructureDefinition/boolean",
      "xml-order": 100
    },
    "name": {
      "id": "#Patient.name",
      "nested": {
        "id": "#Patient.name#constraints",
        "fhirPath-ele-1": {
          "key": "ele-1",
          "expression": "hasValue() or (children().count() > id.count())",
          "severity": "error",
          "bestPractice": false,
          "humanDescription": "All FHIR elements must have a @value or children"
        }
      },
      "cardinality": "0..*",
      "ref": "http://hl7.org/fhir/StructureDefinition/HumanName",
      "xml-order": 110
    },
    "telecom": {
      "id": "#Patient.telecom",
      "nested": {
        "id": "#Patient.telecom#constraints",
        "fhirPath-cpt-2": {
          "key": "cpt-2",
          "expression": "value.empty() or system.exists()",
          "severity": "error",
          "bestPractice": false,
          "humanDescription": "A system is required if a value is provided."
        },
        "fhirPath-ele-1": {
          "key": "ele-1",
          "expression": "hasValue() or (children().count() > id.count())",
          "severity": "error",
          "bestPractice": false,
          "humanDescription": "All FHIR elements must have a @value or children"
        }
      },
      "cardinality": "0..*",
      "ref": "http://hl7.org/fhir/StructureDefinition/ContactPoint",
      "xml-order": 120
    },
    "gender": {
      "id": "#Patient.gender",
      "binding": {
        "strength": "required",
        "abstractAllowed": true,
        "valueSet": "http://hl7.org/fhir/ValueSet/administrative-gender|4.0.1",
        "description": "The gender of a person used for administrative purposes."
      },
      "nested": {
        "id": "#Patient.gender#constraints",
        "fhirPath-ele-1": {
          "key": "ele-1",
          "expression": "hasValue() or (children().count() > id.count())",
          "severity": "error",
          "bestPractice": false,
          "humanDescription": "All FHIR elements must have a @value or children"
        }
      },
      "cardinality": "0..1",
      "ref": "http://hl7.org/fhir/StructureDefinition/code",
      "xml-order": 130
    },
    "birthDate": {
      "id": "#Patient.birthDate",
      "nested": {
        "id": "#Patient.birthDate#constraints",
        "fhirPath-ele-1": {
          "key": "ele-1",
          "expression": "hasValue() or (children().count() > id.count())",
          "severity": "error",
          "bestPractice": false,
          "humanDescription": "All FHIR elements must have a @value or children"
        }
      },
      "cardinality": "0..1",
      "ref": "http://hl7.org/fhir/StructureDefinition/date",
      "xml-order": 140
    },
    "deceased[x]": {
      "id": "#Patient.deceased[x]",
      "nested": {
        "id": "#Patient.deceased[x]#constraints",
        "fhirPath-ele-1": {
          "key": "ele-1",
          "expression": "hasValue() or (children().count() > id.count())",
          "severity": "error",
          "bestPractice": false,
          "humanDescription": "All FHIR elements must have a @value or children"
        }
      },
      "cardinality": "0..1",
      "slice": {
        "ordered": false,
        "defaultAtEnd": false,
        "case": [
          {
            "name": "boolean",
            "condition": {
              "fhir-type-label": "boolean"
            },
            "assertion": {
              "ref": "http://hl7.org/fhir/StructureDefinition/boolean"
            }
          },
          {
            "name": "dateTime",
            "condition": {
              "fhir-type-label": "dateTime"
            },
            "assertion": {
              "ref": "http://hl7.org/fhir/StructureDefinition/dateTime"
            }
          }
        ],
        "default": {
          "raise": {
            "result": "Failure",
            "evidence": [
              {
                "issue": {
                  "issueNumber": 1011,
                  "severity": "Error",
                  "message": "Element is a choice, but the instance does not use one of the allowed choice types ('boolean','dateTime')",
                  "location": "Location: TODO"
                }
              }
            ]
          }
        }
      },
      "xml-order": 150
    },
    "address": {
      "id": "#Patient.address",
      "nested": {
        "id": "#Patient.address#constraints",
        "fhirPath-ele-1": {
          "key": "ele-1",
          "expression": "hasValue() or (children().count() > id.count())",
          "severity": "error",
          "bestPractice": false,
          "humanDescription": "All FHIR elements must have a @value or children"
        }
      },
      "cardinality": "0..*",
      "ref": "http://hl7.org/fhir/StructureDefinition/Address",
      "xml-order": 160
    },
    "maritalStatus": {
      "id": "#Patient.maritalStatus",
      "binding": {
        "strength": "extensible",
        "abstractAllowed": true,
        "valueSet": "http://hl7.org/fhir/ValueSet/marital-status",
        "description": "The domestic partnership status of a person."
      },
      "nested": {
        "id": "#Patient.maritalStatus#constraints",
        "fhirPath-ele-1": {
          "key": "ele-1",
          "expression": "hasValue() or (children().count() > id.count())",
          "severity": "error",
          "bestPractice": false,
          "humanDescription": "All FHIR elements must have a @value or children"
        }
      },
      "cardinality": "0..1",
      "ref": "http://hl7.org/fhir/StructureDefinition/CodeableConcept",
      "xml-order": 170
    },
    "multipleBirth[x]": {
      "id": "#Patient.multipleBirth[x]",
      "nested": {
        "id": "#Patient.multipleBirth[x]#constraints",
        "fhirPath-ele-1": {
          "key": "ele-1",
          "expression": "hasValue() or (children().count() > id.count())",
          "severity": "error",
          "bestPractice": false,
          "humanDescription": "All FHIR elements must have a @value or children"
        }
      },
      "cardinality": "0..1",
      "slice": {
        "ordered": false,
        "defaultAtEnd": false,
        "case": [
          {
            "name": "boolean",
            "condition": {
              "fhir-type-label": "boolean"
            },
            "assertion": {
              "ref": "http://hl7.org/fhir/StructureDefinition/boolean"
            }
          },
          {
            "name": "integer",
            "condition": {
              "fhir-type-label": "integer"
            },
            "assertion": {
              "ref": "http://hl7.org/fhir/StructureDefinition/integer"
            }
          }
        ],
        "default": {
          "raise": {
            "result": "Failure",
            "evidence": [
              {
                "issue": {
                  "issueNumber": 1011,
                  "severity": "Error",
                  "message": "Element is a choice, but the instance does not use one of the allowed choice types ('boolean','integer')",
                  "location": "Location: TODO"
                }
              }
            ]
          }
        }
      },
      "xml-order": 180
    },
    "photo": {
      "id": "#Patient.photo",
      "nested": {
        "id": "#Patient.photo#constraints",
        "fhirPath-att-1": {
          "key": "att-1",
          "expression": "data.empty() or contentType.exists()",
          "severity": "error",
          "bestPractice": false,
          "humanDescription": "If the Attachment has data, it SHALL have a contentType"
        },
        "fhirPath-ele-1": {
          "key": "ele-1",
          "expression": "hasValue() or (children().count() > id.count())",
          "severity": "error",
          "bestPractice": false,
          "humanDescription": "All FHIR elements must have a @value or children"
        }
      },
      "cardinality": "0..*",
      "ref": "http://hl7.org/fhir/StructureDefinition/Attachment",
      "xml-order": 190
    },
    "contact": {
      "id": "#Patient.contact",
      "nested": {
        "id": "#Patient.contact#constraints",
        "fhirPath-ele-1": {
          "key": "ele-1",
          "expression": "hasValue() or (children().count() > id.count())",
          "severity": "error",
          "bestPractice": false,
          "humanDescription": "All FHIR elements must have a @value or children"
        },
        "fhirPath-pat-1": {
          "key": "pat-1",
          "expression": "name.exists() or telecom.exists() or address.exists() or organization.exists()",
          "severity": "error",
          "bestPractice": false,
          "humanDescription": "SHALL at least contain a contact's details or a reference to an organization"
        }
      },
      "cardinality": "0..*",
      "children": {
        "id": {
          "id": "#Patient.contact.id",
          "cardinality": "0..1",
          "ref": "http://hl7.org/fhirpath/System.String",
          "xml-order": 10
        },
        "extension": {
          "id": "#Patient.contact.extension",
          "nested": {
            "id": "#Patient.contact.extension#constraints",
            "fhirPath-ele-1": {
              "key": "ele-1",
              "expression": "hasValue() or (children().count() > id.count())",
              "severity": "error",
              "bestPractice": false,
              "humanDescription": "All FHIR elements must have a @value or children"
            },
            "fhirPath-ext-1": {
              "key": "ext-1",
              "expression": "extension.exists() != value.exists()",
              "severity": "error",
              "bestPractice": false,
              "humanDescription": "Must have either extensions or value[x], not both"
            }
          },
          "cardinality": "0..*",
          "allOf": [
            {
              "ref": "http://hl7.org/fhir/StructureDefinition/Extension"
            },
            {
              "dynaref": "url"
            }
          ],
          "xml-order": 20
        },
        "modifierExtension": {
          "id": "#Patient.contact.modifierExtension",
          "nested": {
            "id": "#Patient.contact.modifierExtension#constraints",
            "fhirPath-ele-1": {
              "key": "ele-1",
              "expression": "hasValue() or (children().count() > id.count())",
              "severity": "error",
              "bestPractice": false,
              "humanDescription": "All FHIR elements must have a @value or children"
            },
            "fhirPath-ext-1": {
              "key": "ext-1",
              "expression": "extension.exists() != value.exists()",
              "severity": "error",
              "bestPractice": false,
              "humanDescription": "Must have either extensions or value[x], not both"
            }
          },
          "cardinality": "0..*",
          "allOf": [
            {
              "ref": "http://hl7.org/fhir/StructureDefinition/Extension"
            },
            {
              "dynaref": "url"
            }
          ],
          "xml-order": 30
        },
        "relationship": {
          "id": "#Patient.contact.relationship",
          "binding": {
            "strength": "extensible",
            "abstractAllowed": true,
            "valueSet": "http://hl7.org/fhir/ValueSet/patient-contactrelationship",
            "description": "The nature of the relationship between a patient and a contact person for that patient."
          },
          "nested": {
            "id": "#Patient.contact.relationship#constraints",
            "fhirPath-ele-1": {
              "key": "ele-1",
              "expression": "hasValue() or (children().count() > id.count())",
              "severity": "error",
              "bestPractice": false,
              "humanDescription": "All FHIR elements must have a @value or children"
            }
          },
          "cardinality": "0..*",
          "ref": "http://hl7.org/fhir/StructureDefinition/CodeableConcept",
          "xml-order": 40
        },
        "name": {
          "id": "#Patient.contact.name",
          "nested": {
            "id": "#Patient.contact.name#constraints",
            "fhirPath-ele-1": {
              "key": "ele-1",
              "expression": "hasValue() or (children().count() > id.count())",
              "severity": "error",
              "bestPractice": false,
              "humanDescription": "All FHIR elements must have a @value or children"
            }
          },
          "cardinality": "0..1",
          "ref": "http://hl7.org/fhir/StructureDefinition/HumanName",
          "xml-order": 50
        },
        "telecom": {
          "id": "#Patient.contact.telecom",
          "nested": {
            "id": "#Patient.contact.telecom#constraints",
            "fhirPath-cpt-2": {
              "key": "cpt-2",
              "expression": "value.empty() or system.exists()",
              "severity": "error",
              "bestPractice": false,
              "humanDescription": "A system is required if a value is provided."
            },
            "fhirPath-ele-1": {
              "key": "ele-1",
              "expression": "hasValue() or (children().count() > id.count())",
              "severity": "error",
              "bestPractice": false,
              "humanDescription": "All FHIR elements must have a @value or children"
            }
          },
          "cardinality": "0..*",
          "ref": "http://hl7.org/fhir/StructureDefinition/ContactPoint",
          "xml-order": 60
        },
        "address": {
          "id": "#Patient.contact.address",
          "nested": {
            "id": "#Patient.contact.address#constraints",
            "fhirPath-ele-1": {
              "key": "ele-1",
              "expression": "hasValue() or (children().count() > id.count())",
              "severity": "error",
              "bestPractice": false,
              "humanDescription": "All FHIR elements must have a @value or children"
            }
          },
          "cardinality": "0..1",
          "ref": "http://hl7.org/fhir/StructureDefinition/Address",
          "xml-order": 70
        },
        "gender": {
          "id": "#Patient.contact.gender",
          "binding": {
            "strength": "required",
            "abstractAllowed": true,
            "valueSet": "http://hl7.org/fhir/ValueSet/administrative-gender|4.0.1",
            "description": "The gender of a person used for administrative purposes."
          },
          "nested": {
            "id": "#Patient.contact.gender#constraints",
            "fhirPath-ele-1": {
              "key": "ele-1",
              "expression": "hasValue() or (children().count() > id.count())",
              "severity": "error",
              "bestPractice": false,
              "humanDescription": "All FHIR elements must have a @value or children"
            }
          },
          "cardinality": "0..1",
          "ref": "http://hl7.org/fhir/StructureDefinition/code",
          "xml-order": 80
        },
        "organization": {
          "id": "#Patient.contact.organization",
          "nested": {
            "id": "#Patient.contact.organization#constraints",
            "fhirPath-ele-1": {
              "key": "ele-1",
              "expression": "hasValue() or (children().count() > id.count())",
              "severity": "error",
              "bestPractice": false,
              "humanDescription": "All FHIR elements must have a @value or children"
            },
            "fhirPath-ref-1": {
              "key": "ref-1",
              "expression": "reference.startsWith('#').not() or (reference.substring(1).trace('url') in %rootResource.contained.id.trace('ids'))",
              "severity": "error",
              "bestPractice": false,
              "humanDescription": "SHALL have a contained resource if a local reference is provided"
            }
          },
          "cardinality": "0..1",
          "allOf": [
            {
              "ref": "http://hl7.org/fhir/StructureDefinition/Reference"
            },
            {
              "validate": {
                "via": "reference",
                "schema": {
                  "allOf": [
                    {
                      "ref": "http://hl7.org/fhir/StructureDefinition/Organization"
                    },
                    {
                      "dynaref": "meta.profile"
                    }
                  ]
                }
              }
            }
          ],
          "xml-order": 90
        },
        "period": {
          "id": "#Patient.contact.period",
          "nested": {
            "id": "#Patient.contact.period#constraints",
            "fhirPath-ele-1": {
              "key": "ele-1",
              "expression": "hasValue() or (children().count() > id.count())",
              "severity": "error",
              "bestPractice": false,
              "humanDescription": "All FHIR elements must have a @value or children"
            },
            "fhirPath-per-1": {
              "key": "per-1",
              "expression": "start.hasValue().not() or end.hasValue().not() or (start <= end)",
              "severity": "error",
              "bestPractice": false,
              "humanDescription": "If present, start SHALL have a lower value than end"
            }
          },
          "cardinality": "0..1",
          "ref": "http://hl7.org/fhir/StructureDefinition/Period",
          "xml-order": 100
        }
      },
      "xml-order": 200
    },
    "communication": {
      "id": "#Patient.communication",
      "nested": {
        "id": "#Patient.communication#constraints",
        "fhirPath-ele-1": {
          "key": "ele-1",
          "expression": "hasValue() or (children().count() > id.count())",
          "severity": "error",
          "bestPractice": false,
          "humanDescription": "All FHIR elements must have a @value or children"
        }
      },
      "cardinality": "0..*",
      "children": {
        "id": {
          "id": "#Patient.communication.id",
          "cardinality": "0..1",
          "ref": "http://hl7.org/fhirpath/System.String",
          "xml-order": 10
        },
        "extension": {
          "id": "#Patient.communication.extension",
          "nested": {
            "id": "#Patient.communication.extension#constraints",
            "fhirPath-ele-1": {
              "key": "ele-1",
              "expression": "hasValue() or (children().count() > id.count())",
              "severity": "error",
              "bestPractice": false,
              "humanDescription": "All FHIR elements must have a @value or children"
            },
            "fhirPath-ext-1": {
              "key": "ext-1",
              "expression": "extension.exists() != value.exists()",
              "severity": "error",
              "bestPractice": false,
              "humanDescription": "Must have either extensions or value[x], not both"
            }
          },
          "cardinality": "0..*",
          "allOf": [
            {
              "ref": "http://hl7.org/fhir/StructureDefinition/Extension"
            },
            {
              "dynaref": "url"
            }
          ],
          "xml-order": 20
        },
        "modifierExtension": {
          "id": "#Patient.communication.modifierExtension",
          "nested": {
            "id": "#Patient.communication.modifierExtension#constraints",
            "fhirPath-ele-1": {
              "key": "ele-1",
              "expression": "hasValue() or (children().count() > id.count())",
              "severity": "error",
              "bestPractice": false,
              "humanDescription": "All FHIR elements must have a @value or children"
            },
            "fhirPath-ext-1": {
              "key": "ext-1",
              "expression": "extension.exists() != value.exists()",
              "severity": "error",
              "bestPractice": false,
              "humanDescription": "Must have either extensions or value[x], not both"
            }
          },
          "cardinality": "0..*",
          "allOf": [
            {
              "ref": "http://hl7.org/fhir/StructureDefinition/Extension"
            },
            {
              "dynaref": "url"
            }
          ],
          "xml-order": 30
        },
        "language": {
          "id": "#Patient.communication.language",
          "binding": {
            "strength": "preferred",
            "abstractAllowed": true,
            "valueSet": "http://hl7.org/fhir/ValueSet/languages",
            "description": "A human language."
          },
          "nested": {
            "id": "#Patient.communication.language#constraints",
            "fhirPath-ele-1": {
              "key": "ele-1",
              "expression": "hasValue() or (children().count() > id.count())",
              "severity": "error",
              "bestPractice": false,
              "humanDescription": "All FHIR elements must have a @value or children"
            }
          },
          "cardinality": "1..1",
          "ref": "http://hl7.org/fhir/StructureDefinition/CodeableConcept",
          "xml-order": 40
        },
        "preferred": {
          "id": "#Patient.communication.preferred",
          "nested": {
            "id": "#Patient.communication.preferred#constraints",
            "fhirPath-ele-1": {
              "key": "ele-1",
              "expression": "hasValue() or (children().count() > id.count())",
              "severity": "error",
              "bestPractice": false,
              "humanDescription": "All FHIR elements must have a @value or children"
            }
          },
          "cardinality": "0..1",
          "ref": "http://hl7.org/fhir/StructureDefinition/boolean",
          "xml-order": 50
        }
      },
      "xml-order": 210
    },
    "generalPractitioner": {
      "id": "#Patient.generalPractitioner",
      "nested": {
        "id": "#Patient.generalPractitioner#constraints",
        "fhirPath-ele-1": {
          "key": "ele-1",
          "expression": "hasValue() or (children().count() > id.count())",
          "severity": "error",
          "bestPractice": false,
          "humanDescription": "All FHIR elements must have a @value or children"
        },
        "fhirPath-ref-1": {
          "key": "ref-1",
          "expression": "reference.startsWith('#').not() or (reference.substring(1).trace('url') in %rootResource.contained.id.trace('ids'))",
          "severity": "error",
          "bestPractice": false,
          "humanDescription": "SHALL have a contained resource if a local reference is provided"
        }
      },
      "cardinality": "0..*",
      "allOf": [
        {
          "ref": "http://hl7.org/fhir/StructureDefinition/Reference"
        },
        {
          "validate": {
            "via": "reference",
            "schema": {
              "allOf": [
                {
                  "slice": {
                    "ordered": false,
                    "defaultAtEnd": false,
                    "case": [
                      {
                        "name": "httphl7orgfhirStructureDefinitionOrganization",
                        "condition": {
                          "ref": "http://hl7.org/fhir/StructureDefinition/Organization"
                        },
                        "assertion": {
                          "raise": {
                            "result": "Success"
                          }
                        }
                      },
                      {
                        "name": "httphl7orgfhirStructureDefinitionPractitioner",
                        "condition": {
                          "ref": "http://hl7.org/fhir/StructureDefinition/Practitioner"
                        },
                        "assertion": {
                          "raise": {
                            "result": "Success"
                          }
                        }
                      },
                      {
                        "name": "httphl7orgfhirStructureDefinitionPractitionerRole",
                        "condition": {
                          "ref": "http://hl7.org/fhir/StructureDefinition/PractitionerRole"
                        },
                        "assertion": {
                          "raise": {
                            "result": "Success"
                          }
                        }
                      }
                    ],
                    "default": {
                      "raise": {
                        "result": "Failure",
                        "evidence": [
                          {
                            "issue": {
                              "issueNumber": 1011,
                              "severity": "Error",
                              "message": "Element does not validate against any of the expected target profiles: ('http://hl7.org/fhir/StructureDefinition/Organization','http://hl7.org/fhir/StructureDefinition/Practitioner','http://hl7.org/fhir/StructureDefinition/PractitionerRole')",
                              "location": "Location: TODO"
                            }
                          }
                        ]
                      }
                    }
                  }
                },
                {
                  "dynaref": "meta.profile"
                }
              ]
            }
          }
        }
      ],
      "xml-order": 220
    },
    "managingOrganization": {
      "id": "#Patient.managingOrganization",
      "nested": {
        "id": "#Patient.managingOrganization#constraints",
        "fhirPath-ele-1": {
          "key": "ele-1",
          "expression": "hasValue() or (children().count() > id.count())",
          "severity": "error",
          "bestPractice": false,
          "humanDescription": "All FHIR elements must have a @value or children"
        },
        "fhirPath-ref-1": {
          "key": "ref-1",
          "expression": "reference.startsWith('#').not() or (reference.substring(1).trace('url') in %rootResource.contained.id.trace('ids'))",
          "severity": "error",
          "bestPractice": false,
          "humanDescription": "SHALL have a contained resource if a local reference is provided"
        }
      },
      "cardinality": "0..1",
      "allOf": [
        {
          "ref": "http://hl7.org/fhir/StructureDefinition/Reference"
        },
        {
          "validate": {
            "via": "reference",
            "schema": {
              "allOf": [
                {
                  "ref": "http://hl7.org/fhir/StructureDefinition/Organization"
                },
                {
                  "dynaref": "meta.profile"
                }
              ]
            }
          }
        }
      ],
      "xml-order": 230
    },
    "link": {
      "id": "#Patient.link",
      "nested": {
        "id": "#Patient.link#constraints",
        "fhirPath-ele-1": {
          "key": "ele-1",
          "expression": "hasValue() or (children().count() > id.count())",
          "severity": "error",
          "bestPractice": false,
          "humanDescription": "All FHIR elements must have a @value or children"
        }
      },
      "cardinality": "0..*",
      "children": {
        "id": {
          "id": "#Patient.link.id",
          "cardinality": "0..1",
          "ref": "http://hl7.org/fhirpath/System.String",
          "xml-order": 10
        },
        "extension": {
          "id": "#Patient.link.extension",
          "nested": {
            "id": "#Patient.link.extension#constraints",
            "fhirPath-ele-1": {
              "key": "ele-1",
              "expression": "hasValue() or (children().count() > id.count())",
              "severity": "error",
              "bestPractice": false,
              "humanDescription": "All FHIR elements must have a @value or children"
            },
            "fhirPath-ext-1": {
              "key": "ext-1",
              "expression": "extension.exists() != value.exists()",
              "severity": "error",
              "bestPractice": false,
              "humanDescription": "Must have either extensions or value[x], not both"
            }
          },
          "cardinality": "0..*",
          "allOf": [
            {
              "ref": "http://hl7.org/fhir/StructureDefinition/Extension"
            },
            {
              "dynaref": "url"
            }
          ],
          "xml-order": 20
        },
        "modifierExtension": {
          "id": "#Patient.link.modifierExtension",
          "nested": {
            "id": "#Patient.link.modifierExtension#constraints",
            "fhirPath-ele-1": {
              "key": "ele-1",
              "expression": "hasValue() or (children().count() > id.count())",
              "severity": "error",
              "bestPractice": false,
              "humanDescription": "All FHIR elements must have a @value or children"
            },
            "fhirPath-ext-1": {
              "key": "ext-1",
              "expression": "extension.exists() != value.exists()",
              "severity": "error",
              "bestPractice": false,
              "humanDescription": "Must have either extensions or value[x], not both"
            }
          },
          "cardinality": "0..*",
          "allOf": [
            {
              "ref": "http://hl7.org/fhir/StructureDefinition/Extension"
            },
            {
              "dynaref": "url"
            }
          ],
          "xml-order": 30
        },
        "other": {
          "id": "#Patient.link.other",
          "nested": {
            "id": "#Patient.link.other#constraints",
            "fhirPath-ele-1": {
              "key": "ele-1",
              "expression": "hasValue() or (children().count() > id.count())",
              "severity": "error",
              "bestPractice": false,
              "humanDescription": "All FHIR elements must have a @value or children"
            },
            "fhirPath-ref-1": {
              "key": "ref-1",
              "expression": "reference.startsWith('#').not() or (reference.substring(1).trace('url') in %rootResource.contained.id.trace('ids'))",
              "severity": "error",
              "bestPractice": false,
              "humanDescription": "SHALL have a contained resource if a local reference is provided"
            }
          },
          "cardinality": "1..1",
          "allOf": [
            {
              "ref": "http://hl7.org/fhir/StructureDefinition/Reference"
            },
            {
              "validate": {
                "via": "reference",
                "schema": {
                  "allOf": [
                    {
                      "slice": {
                        "ordered": false,
                        "defaultAtEnd": false,
                        "case": [
                          {
                            "name": "httphl7orgfhirStructureDefinitionPatient",
                            "condition": {
                              "ref": "http://hl7.org/fhir/StructureDefinition/Patient"
                            },
                            "assertion": {
                              "raise": {
                                "result": "Success"
                              }
                            }
                          },
                          {
                            "name": "httphl7orgfhirStructureDefinitionRelatedPerson",
                            "condition": {
                              "ref": "http://hl7.org/fhir/StructureDefinition/RelatedPerson"
                            },
                            "assertion": {
                              "raise": {
                                "result": "Success"
                              }
                            }
                          }
                        ],
                        "default": {
                          "raise": {
                            "result": "Failure",
                            "evidence": [
                              {
                                "issue": {
                                  "issueNumber": 1011,
                                  "severity": "Error",
                                  "message": "Element does not validate against any of the expected target profiles: ('http://hl7.org/fhir/StructureDefinition/Patient','http://hl7.org/fhir/StructureDefinition/RelatedPerson')",
                                  "location": "Location: TODO"
                                }
                              }
                            ]
                          }
                        }
                      }
                    },
                    {
                      "dynaref": "meta.profile"
                    }
                  ]
                }
              }
            }
          ],
          "xml-order": 40
        },
        "type": {
          "id": "#Patient.link.type",
          "binding": {
            "strength": "required",
            "abstractAllowed": true,
            "valueSet": "http://hl7.org/fhir/ValueSet/link-type|4.0.1",
            "description": "The type of link between this patient resource and another patient resource."
          },
          "nested": {
            "id": "#Patient.link.type#constraints",
            "fhirPath-ele-1": {
              "key": "ele-1",
              "expression": "hasValue() or (children().count() > id.count())",
              "severity": "error",
              "bestPractice": false,
              "humanDescription": "All FHIR elements must have a @value or children"
            }
          },
          "cardinality": "1..1",
          "ref": "http://hl7.org/fhir/StructureDefinition/code",
          "xml-order": 50
        }
      },
      "xml-order": 240
    }
  }
}